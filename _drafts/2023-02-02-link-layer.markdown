---
layout: post
title: "计算机网络——链路层"
---

## 链路层概述

链路层承担以下工作：
1. *封装成帧*：每个网络层的数据报在经过物理链路传输之前，几乎所有链路层协议都会把它封装成**帧**（Frame）。
2. *链路接入*：**媒体访问控制**（Medium Access Control，MAC）是链路层的一部分，规定了帧在链路上的传输规则。
   - 对点对点链路，通常使用简单的*点对点协议*（Point-to-Point Protocol，PPP），仅需在链路空闲时发送PPP帧即可；
   - 当多个节点共享单个广播链路时，各种问题就会出现，此时我们使用*以太网*，以太网的帧有时也叫MAC帧，这是本文的主要内容；
   - 如果需要使用以太网接入点对点网络（如ASDL），则使用以太网上点对点协议（PPP over Ethernet，PPPoE）将PPP帧封装在以太网帧中，在以太网中搭建点对点隧道。
3. *可靠交付*：如同TCP一样，在多个节点之间移动链路层帧时，提供可靠交付服务的链路层协议保证不会产生差错。通常易出差错的链路（如无线链路）才提供这种服务，否则容易浪费性能。
4. *差错检测和纠正*：链路层通常提供机制检测帧中的比特差错，以防止转发出现差错的帧。链路层的差错检测通常更加复杂且用硬件实现，有些时候还提供从差错中恢复的能力。差错检测和纠正只是可靠交付服务的一个子集，因此尽管许多链路层协议提供差错检测，其仍不提供可靠交付服务。

链路层的主体部分实现在**网络适配器**（Network Adapter，又称**网络接口卡**，Network Interface Card，NIC）上。
这是主板上的一块专用芯片，因此，许多链路层功能实际上是由硬件实现的。
早年间这块芯片还是通过物理上分离的一张连接到总线上的*卡*实现的，现在的网卡通常直接综合在主板上，形成局域网在主板（LAN on motherboard）配置。

当然，并非所有传输层功能都位于硬件上。
传输层硬件必须通过总线和CPU通信，而CPU必须能够寻址到网卡并接受网卡的中断。
链路层的软件组件实现了高层功能，发送时需填充地址信息并激活控制器硬件，接收时需响应中断并把数据报交给上层协议。
链路层就是网络协议栈中软件和硬件交接的地方。

## 差错检测与纠正
